<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="{{ url_for('static', filename='bootstrap/bootstrap/css/bootstrap.min.css') }}" rel="stylesheet">
	<!-- Collapse Menu -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
	<!-- Custom icons for section cards -->
	<script src="https://kit.fontawesome.com/acaa606056.js"></script>
	<!-- Custom Fonts -->
	<link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">
	<!-- Custom styles for this template -->
	<link href="{{ url_for('static', filename='css/styles.css') }}" rel="stylesheet">
	<!-- Custom Javascript Functions -->
	<script src="{{ url_for('static', filename='javascript/jsFunctions.js') }}"></script>
	<!-- Include the PayPal JavaScript SDK -->
    	<script src="https://www.paypal.com/sdk/js?client-id=AcZqMWdKuS0Us2Z_zhjF2qoD9Ll9KNG6YrEhHPFcMkYTrm7sJRr2gwNTaucmAimqI5ycSwyQwgVHcypf&currency=USD"></script>
	<!-- Rotating Card Function -->
	<link href=" {{ url_for('static', filename='css/rotating-card.css') }}" rel="stylesheet">

	<!-- Include Unity Assets for games -->
	<link href=" {{ url_for('static', filename='games/Hex_final_webgl/TemplateData/style.css') }}" rel="stylesheet">

    <!-- Include Unity Scripts for games -->
	<script src="{{ url_for('static', filename='games/Hex_final_webgl/Build/UnityLoader.js') }}"></script>
	<script src="{{ url_for('static', filename='games/Hex_final_webgl/TemplateData/UnityProgress.js') }}"></script>
	<script src="{{ url_for('static', filename='javascript/games.js') }}"></script>
	<!-- Include Form Submission js -->
	<script src="{{ url_for('static', filename='javascript/login.js') }}"></script>
<!-- Custom styles for this template -->
<link href="{{ url_for('static', filename='css/contact.css') }}" rel="stylesheet">
</head>
<style>.rating-header {
    margin-top: -10px;
    margin-bottom: 10px;
}
</style>
<script>
	jQuery(document).ready(function($){
	    
	$(".btnrating").on('click',(function(e) {
	
	var previous_value = $("#rating").val();
	
	var selected_value = $(this).attr("data-attr");
	$("#rating").val(selected_value);
	
	$(".selected-rating").empty();
	$(".selected-rating").html(selected_value);
	
	for (i = 1; i <= selected_value; ++i) {
	$("#rating-star-"+i).toggleClass('btn-warning');
	$("#rating-star-"+i).toggleClass('btn-default');
	}
	
	for (ix = 1; ix <= previous_value; ++ix) {
	$("#rating-star-"+ix).toggleClass('btn-warning');
	$("#rating-star-"+ix).toggleClass('btn-default');
	}
	
	}));	
});
</script>
<body>

<center><h3 style="color: #FFFFFF;">Feedback Form</h3></center>

<div class="container">
  <form id="feedbackForm" class="form-group">
    <input type="text" id="firstname" name="firstname" placeholder="First Name">
    <input type="text" id="lastname" name="lastname" placeholder="Last Name">
	 <input type="text" id="email_response" name="email_response" placeholder="Enter Email">
	 <div class="form-group">
    <label for="answer1">Did you receive your food in a timely manner?</label>
		<select class="form-control" name="answer1" id="answer1">
		  <option value="yes">Yes</option>
		  <option value="no">No</option>
		</select>
	</div>
	<div class="form-group">
    <label for="answer2">Did the waitstaff ensure you received the best quality service today?</label>
		<select class="form-control" name="answer2" id="answer2">
		  <option value="yes">Yes</option>
		  <option value="no">No</option>
		</select>
	</div>
	<div class="form-group">
    <label for="answer3">Are you a robot? *Captcha*</label>
		<select class="form-control" name="answer3" id="answer3">
		  <option value="yes">Yes</option>
		  <option value="no">No</option>
		</select>
	</div>
	<div class="form-group">
	    <label class="control-label" for="rating">
			<span class="field-label-header">How would you rate your service today?</span><br>
			<span class="field-label-info"></span>
			<input type="hidden" id="rating" name="rating" value="" required="required">
	    </label>
	    <button type="button" class="btnrating btn btn-default btn-lg" data-attr="1" id="rating-star-1">
	        <i class="fa fa-star" aria-hidden="true"></i>
	    </button>
	    <button type="button" class="btnrating btn btn-default btn-lg" data-attr="2" id="rating-star-2">
	        <i class="fa fa-star" aria-hidden="true"></i>
	    </button>
	    <button type="button" class="btnrating btn btn-default btn-lg" data-attr="3" id="rating-star-3">
	        <i class="fa fa-star" aria-hidden="true"></i>
	    </button>
	    <button type="button" class="btnrating btn btn-default btn-lg" data-attr="4" id="rating-star-4">
	        <i class="fa fa-star" aria-hidden="true"></i>
	    </button>
		<button type="button" class="btnrating btn btn-default btn-lg" data-attr="5" id="rating-star-5">
	        <i class="fa fa-star" aria-hidden="true"></i>
	    </button>
		<button type="button" class="btnrating btn btn-default btn-lg" data-attr="6" id="rating-star-6">
	        <i class="fa fa-star" aria-hidden="true"></i>
	    </button>
	    <button type="button" class="btnrating btn btn-default btn-lg" data-attr="7" id="rating-star-7">
	        <i class="fa fa-star" aria-hidden="true"></i>
	    </button>
	    <button type="button" class="btnrating btn btn-default btn-lg" data-attr="8" id="rating-star-8">
	        <i class="fa fa-star" aria-hidden="true"></i>
	    </button>
	    <button type="button" class="btnrating btn btn-default btn-lg" data-attr="9" id="rating-star-9">
	        <i class="fa fa-star" aria-hidden="true"></i>
	    </button>
	    <button type="button" class="btnrating btn btn-default btn-lg" data-attr="10" id="rating-star-10">
	        <i class="fa fa-star" aria-hidden="true"></i>
	    </button>
	</div>
	
    <label for="feedback">Comments</label>
    <textarea id="feedback" name="feedback" placeholder="Let us know how we did..." style="height:200px"></textarea>
  </form>
  <button id="btn_feedbackForm_submitFeedback" type="button" class="btn btn-dark px-4 rounded-pill" onclick=requestInputText('/api/feedback','#feedbackForm'); ><i class="fa fa-envelope-o" aria-hidden="true"></i> Submit</button>
</div>
<script>
$('#btn_feedbackForm_submitFeedback').click( function()
{
    PostMessageForm()
});

function PostMessageForm()
{
	//Generate XHR
	var post = new XMLHttpRequest();
	
	// Create a notification to database
	var url = "/api/feedback";
	
	// Open a socket to the url
	post.open('POST', url);
	
	// Handle on load
	post.onload = function(data) 
	{
		if (post.status === 200 || post.status === 201 || post.status === 204)
		{
			alert( "Feedback submitted" );
			window.location = '/';
			return;
		}
		else
		{
			var error = JSON.parse(post.responseText);
			console.log(error.message);
			alert(`Error ${post.status}: ${error.message}`);
		}
	};
	
	// Handle on errors	
	post.error = function() 
	{
		alert("Request Failed!");
		return;
	};
	
    var formData = new FormData(document.getElementById("feedbackForm"));
	post.send(formData);		
}
</script>
</body>
</html>
